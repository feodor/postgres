SELECT
    t,
	ARRAY(
		SELECT
			('192.168.1.' || (v % 256))::cidr
		FROM
			generate_series(max(0, t - 10),  t) as v
	) AS v
	INTO test_cidr
FROM
	generate_series(1, 200) as t;
SET anyarray.similarity_type=cosine;
SELECT  t, similarity(v, to_inetp_array('{10,9,8,7,6,5,4,3,2,1}')::cidr[]) AS s FROM test_cidr 
	WHERE v % to_inetp_array('{10,9,8,7,6,5,4,3,2,1}')::cidr[] ORDER BY s DESC, t;
 t  |    s     
----+----------
 10 | 0.953463
 11 | 0.953463
  9 |      0.9
 12 | 0.858116
  8 | 0.843274
  7 | 0.782624
 13 |  0.76277
  6 | 0.717137
 14 | 0.667424
  5 | 0.645497
(10 rows)

SELECT  t, similarity(v, to_inetp_array('{50,49,8,7,6,5,4,3,2,1}')::cidr[]) AS s FROM test_cidr 
	WHERE v % to_inetp_array('{50,49,8,7,6,5,4,3,2,1}')::cidr[] ORDER BY s DESC, t;
 t  |    s     
----+----------
  8 | 0.843274
  9 |      0.8
  7 | 0.782624
 10 |  0.76277
 11 |  0.76277
  6 | 0.717137
 12 | 0.667424
  5 | 0.645497
(8 rows)

SET anyarray.similarity_type=jaccard;
SELECT  t, similarity(v, to_inetp_array('{10,9,8,7,6,5,4,3,2,1}')::cidr[]) AS s FROM test_cidr 
	WHERE v % to_inetp_array('{10,9,8,7,6,5,4,3,2,1}')::cidr[] ORDER BY s DESC, t;
 t  |    s     
----+----------
 10 | 0.909091
 11 | 0.909091
  9 | 0.818182
 12 |     0.75
  8 | 0.727273
  7 | 0.636364
 13 | 0.615385
(7 rows)

SELECT  t, similarity(v, to_inetp_array('{50,49,8,7,6,5,4,3,2,1}')::cidr[]) AS s FROM test_cidr 
	WHERE v % to_inetp_array('{50,49,8,7,6,5,4,3,2,1}')::cidr[] ORDER BY s DESC, t;
 t  |    s     
----+----------
  8 | 0.727273
  9 | 0.666667
  7 | 0.636364
 10 | 0.615385
 11 | 0.615385
(5 rows)

SELECT t, v FROM test_cidr WHERE v && to_inetp_array('{43,50}')::cidr[] ORDER BY t;
 t  |                                                                                         v                                                                                         
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 43 | {192.168.1.33/32,192.168.1.34/32,192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32}
 44 | {192.168.1.34/32,192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32}
 45 | {192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32}
 46 | {192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32}
 47 | {192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32}
 48 | {192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32}
 49 | {192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32}
 50 | {192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32}
 51 | {192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32}
 52 | {192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32}
 53 | {192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32}
 54 | {192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32}
 55 | {192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32}
 56 | {192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32}
 57 | {192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32}
 58 | {192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32}
 59 | {192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32,192.168.1.59/32}
 60 | {192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32,192.168.1.59/32,192.168.1.60/32}
(18 rows)

SELECT t, v FROM test_cidr WHERE v @> to_inetp_array('{43,50}')::cidr[] ORDER BY t;
 t  |                                                                                         v                                                                                         
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 50 | {192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32}
 51 | {192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32}
 52 | {192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32}
 53 | {192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32}
(4 rows)

SELECT t, v FROM test_cidr WHERE v <@ to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                    v                                                                                    
----+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  1 | {192.168.1.0/32,192.168.1.1/32}
  2 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32}
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
(10 rows)

SELECT t, v FROM test_cidr WHERE v =  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                    v                                                                                    
----+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
(1 row)

SET anyarray.similarity_type=cosine;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                      v                                                                                      
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
 13 | {192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32}
 14 | {192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32}
(12 rows)

SET anyarray.similarity_type=jaccard;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                     v                                                                                     
----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
(7 rows)

SET anyarray.similarity_type=overlap;
SET anyarray.similarity_threshold = 3;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                        v                                                                                        
----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  2 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32}
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
 13 | {192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32}
 14 | {192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32}
 15 | {192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32}
 16 | {192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32}
 17 | {192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32,192.168.1.17/32}
 18 | {192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32,192.168.1.17/32,192.168.1.18/32}
(17 rows)

RESET anyarray.similarity_threshold;
CREATE INDEX idx_test_cidr ON test_cidr USING gist (v _cidr_aa_ops);
SET enable_seqscan=off;
EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v && to_inetp_array('{43,50}')::cidr[] ORDER BY t;
                                  QUERY PLAN                                  
------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Bitmap Heap Scan on test_cidr
         Recheck Cond: (v && '{192.168.1.43/32,192.168.1.50/32}'::cidr[])
         ->  Bitmap Index Scan on idx_test_cidr
               Index Cond: (v && '{192.168.1.43/32,192.168.1.50/32}'::cidr[])
(6 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v @> to_inetp_array('{43,50}')::cidr[] ORDER BY t;
                               QUERY PLAN                               
------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Index Scan using idx_test_cidr on test_cidr
         Index Cond: (v @> '{192.168.1.43/32,192.168.1.50/32}'::cidr[])
(4 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v <@ to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
                                                                                                  QUERY PLAN                                                                                                  
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Index Scan using idx_test_cidr on test_cidr
         Index Cond: (v <@ '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
(4 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v =  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
                                                                                                 QUERY PLAN                                                                                                  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Index Scan using idx_test_cidr on test_cidr
         Index Cond: (v = '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
(4 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
                                                                                                 QUERY PLAN                                                                                                  
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Index Scan using idx_test_cidr on test_cidr
         Index Cond: (v % '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
(4 rows)

SELECT t, v FROM test_cidr WHERE v && to_inetp_array('{43,50}')::cidr[] ORDER BY t;
 t  |                                                                                         v                                                                                         
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 43 | {192.168.1.33/32,192.168.1.34/32,192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32}
 44 | {192.168.1.34/32,192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32}
 45 | {192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32}
 46 | {192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32}
 47 | {192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32}
 48 | {192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32}
 49 | {192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32}
 50 | {192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32}
 51 | {192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32}
 52 | {192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32}
 53 | {192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32}
 54 | {192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32}
 55 | {192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32}
 56 | {192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32}
 57 | {192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32}
 58 | {192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32}
 59 | {192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32,192.168.1.59/32}
 60 | {192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32,192.168.1.59/32,192.168.1.60/32}
(18 rows)

SELECT t, v FROM test_cidr WHERE v @> to_inetp_array('{43,50}')::cidr[] ORDER BY t;
 t  |                                                                                         v                                                                                         
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 50 | {192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32}
 51 | {192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32}
 52 | {192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32}
 53 | {192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32}
(4 rows)

SELECT t, v FROM test_cidr WHERE v <@ to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                    v                                                                                    
----+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  1 | {192.168.1.0/32,192.168.1.1/32}
  2 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32}
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
(10 rows)

SELECT t, v FROM test_cidr WHERE v =  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                    v                                                                                    
----+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
(1 row)

SET anyarray.similarity_type=cosine;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                      v                                                                                      
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
 13 | {192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32}
 14 | {192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32}
(12 rows)

SET anyarray.similarity_type=jaccard;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                     v                                                                                     
----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
(7 rows)

SET anyarray.similarity_type=overlap;
SET anyarray.similarity_threshold = 3;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                        v                                                                                        
----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  2 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32}
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
 13 | {192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32}
 14 | {192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32}
 15 | {192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32}
 16 | {192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32}
 17 | {192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32,192.168.1.17/32}
 18 | {192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32,192.168.1.17/32,192.168.1.18/32}
(17 rows)

RESET anyarray.similarity_threshold;
DROP INDEX idx_test_cidr;
CREATE INDEX idx_test_cidr ON test_cidr USING gin (v _cidr_aa_ops);
SET enable_seqscan=off;
EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v && to_inetp_array('{43,50}')::cidr[] ORDER BY t;
                                  QUERY PLAN                                  
------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Bitmap Heap Scan on test_cidr
         Recheck Cond: (v && '{192.168.1.43/32,192.168.1.50/32}'::cidr[])
         ->  Bitmap Index Scan on idx_test_cidr
               Index Cond: (v && '{192.168.1.43/32,192.168.1.50/32}'::cidr[])
(6 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v @> to_inetp_array('{43,50}')::cidr[] ORDER BY t;
                                  QUERY PLAN                                  
------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Bitmap Heap Scan on test_cidr
         Recheck Cond: (v @> '{192.168.1.43/32,192.168.1.50/32}'::cidr[])
         ->  Bitmap Index Scan on idx_test_cidr
               Index Cond: (v @> '{192.168.1.43/32,192.168.1.50/32}'::cidr[])
(6 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v <@ to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
                                                                                                     QUERY PLAN                                                                                                     
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Bitmap Heap Scan on test_cidr
         Recheck Cond: (v <@ '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
         ->  Bitmap Index Scan on idx_test_cidr
               Index Cond: (v <@ '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
(6 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v =  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
                                                                                                    QUERY PLAN                                                                                                     
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Bitmap Heap Scan on test_cidr
         Recheck Cond: (v = '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
         ->  Bitmap Index Scan on idx_test_cidr
               Index Cond: (v = '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
(6 rows)

EXPLAIN (COSTS OFF) SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
                                                                                                    QUERY PLAN                                                                                                     
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Sort
   Sort Key: t
   ->  Bitmap Heap Scan on test_cidr
         Recheck Cond: (v % '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
         ->  Bitmap Index Scan on idx_test_cidr
               Index Cond: (v % '{192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}'::cidr[])
(6 rows)

SELECT t, v FROM test_cidr WHERE v && to_inetp_array('{43,50}')::cidr[] ORDER BY t;
 t  |                                                                                         v                                                                                         
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 43 | {192.168.1.33/32,192.168.1.34/32,192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32}
 44 | {192.168.1.34/32,192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32}
 45 | {192.168.1.35/32,192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32}
 46 | {192.168.1.36/32,192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32}
 47 | {192.168.1.37/32,192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32}
 48 | {192.168.1.38/32,192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32}
 49 | {192.168.1.39/32,192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32}
 50 | {192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32}
 51 | {192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32}
 52 | {192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32}
 53 | {192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32}
 54 | {192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32}
 55 | {192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32}
 56 | {192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32}
 57 | {192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32}
 58 | {192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32}
 59 | {192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32,192.168.1.59/32}
 60 | {192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32,192.168.1.54/32,192.168.1.55/32,192.168.1.56/32,192.168.1.57/32,192.168.1.58/32,192.168.1.59/32,192.168.1.60/32}
(18 rows)

SELECT t, v FROM test_cidr WHERE v @> to_inetp_array('{43,50}')::cidr[] ORDER BY t;
 t  |                                                                                         v                                                                                         
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 50 | {192.168.1.40/32,192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32}
 51 | {192.168.1.41/32,192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32}
 52 | {192.168.1.42/32,192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32}
 53 | {192.168.1.43/32,192.168.1.44/32,192.168.1.45/32,192.168.1.46/32,192.168.1.47/32,192.168.1.48/32,192.168.1.49/32,192.168.1.50/32,192.168.1.51/32,192.168.1.52/32,192.168.1.53/32}
(4 rows)

SELECT t, v FROM test_cidr WHERE v <@ to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                    v                                                                                    
----+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  1 | {192.168.1.0/32,192.168.1.1/32}
  2 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32}
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
(10 rows)

SELECT t, v FROM test_cidr WHERE v =  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                    v                                                                                    
----+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
(1 row)

SET anyarray.similarity_type=cosine;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                      v                                                                                      
----+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
 13 | {192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32}
 14 | {192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32}
(12 rows)

SET anyarray.similarity_type=jaccard;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                     v                                                                                     
----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
(7 rows)

SET anyarray.similarity_type=overlap;
SET anyarray.similarity_threshold = 3;
SELECT t, v FROM test_cidr WHERE v %  to_inetp_array('{0,1,2,3,4,5,6,7,8,9,10}')::cidr[] ORDER BY t;
 t  |                                                                                        v                                                                                        
----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  2 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32}
  3 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32}
  4 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32}
  5 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32}
  6 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32}
  7 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32}
  8 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32}
  9 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32}
 10 | {192.168.1.0/32,192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32}
 11 | {192.168.1.1/32,192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32}
 12 | {192.168.1.2/32,192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32}
 13 | {192.168.1.3/32,192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32}
 14 | {192.168.1.4/32,192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32}
 15 | {192.168.1.5/32,192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32}
 16 | {192.168.1.6/32,192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32}
 17 | {192.168.1.7/32,192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32,192.168.1.17/32}
 18 | {192.168.1.8/32,192.168.1.9/32,192.168.1.10/32,192.168.1.11/32,192.168.1.12/32,192.168.1.13/32,192.168.1.14/32,192.168.1.15/32,192.168.1.16/32,192.168.1.17/32,192.168.1.18/32}
(17 rows)

RESET anyarray.similarity_threshold;
