SELECT anyset(1234);
 anyset 
--------
 {1234}
(1 row)

SELECT icount('{1234234,0234234}'::int[]);
 icount 
--------
      2
(1 row)

SELECT sort('{1234234,-30,0234234}'::int[]);
         sort         
----------------------
 {-30,234234,1234234}
(1 row)

SELECT sort('{1234234,-30,0234234}'::int[],'asc');
         sort         
----------------------
 {-30,234234,1234234}
(1 row)

SELECT sort('{1234234,-30,0234234}'::int[],'desc');
         sort         
----------------------
 {1234234,234234,-30}
(1 row)

SELECT sort_asc('{1234234,-30,0234234}'::int[]);
       sort_asc       
----------------------
 {-30,234234,1234234}
(1 row)

SELECT sort_desc('{1234234,-30,0234234}'::int[]);
      sort_desc       
----------------------
 {1234234,234234,-30}
(1 row)

SELECT uniq('{1234234,-30,-30,0234234,-30}'::int[]);
           uniq           
--------------------------
 {1234234,-30,234234,-30}
(1 row)

SELECT uniq(sort_asc('{1234234,-30,-30,0234234,-30}'::int[]));
         uniq         
----------------------
 {-30,234234,1234234}
(1 row)

SELECT uniq_d('{1234234,-30,-30,0234234,-30,0234234}'::int[]);
 uniq_d 
--------
 {-30}
(1 row)

SELECT uniq_d(sort_asc('{1234234,-30,-30,0234234,-30,0234234}'::int[]));
    uniq_d    
--------------
 {-30,234234}
(1 row)

SELECT idx('{1234234,-30,-30,0234234,-30}'::int[],-30);
 idx 
-----
   2
(1 row)

SELECT subarray('{1234234,-30,-30,0234234,-30}'::int[],2,3);
     subarray     
------------------
 {-30,-30,234234}
(1 row)

SELECT subarray('{1234234,-30,-30,0234234,-30}'::int[],-1,1);
 subarray 
----------
 {-30}
(1 row)

SELECT subarray('{1234234,-30,-30,0234234,-30}'::int[],0,-1);
         subarray         
--------------------------
 {1234234,-30,-30,234234}
(1 row)

SELECT anyset('1234'::text);
 anyset 
--------
 {1234}
(1 row)

SELECT icount('{1234234,0234234}'::text[]);
 icount 
--------
      2
(1 row)

SELECT sort('{1234234,-30,0234234}'::text[]);
         sort          
-----------------------
 {-30,0234234,1234234}
(1 row)

SELECT sort('{1234234,-30,0234234}'::text[],'asc');
         sort          
-----------------------
 {-30,0234234,1234234}
(1 row)

SELECT sort('{1234234,-30,0234234}'::text[],'desc');
         sort          
-----------------------
 {1234234,0234234,-30}
(1 row)

SELECT sort_asc('{1234234,-30,0234234}'::text[]);
       sort_asc        
-----------------------
 {-30,0234234,1234234}
(1 row)

SELECT sort_desc('{1234234,-30,0234234}'::text[]);
       sort_desc       
-----------------------
 {1234234,0234234,-30}
(1 row)

SELECT uniq('{1234234,-30,-30,0234234,-30}'::text[]);
           uniq            
---------------------------
 {1234234,-30,0234234,-30}
(1 row)

SELECT uniq(sort_asc('{1234234,-30,-30,0234234,-30}'::text[]));
         uniq          
-----------------------
 {-30,0234234,1234234}
(1 row)

SELECT uniq_d('{1234234,-30,-30,0234234,-30,0234234}'::text[]);
 uniq_d 
--------
 {-30}
(1 row)

SELECT uniq_d(sort_asc('{1234234,-30,-30,0234234,-30,0234234}'::text[]));
    uniq_d     
---------------
 {-30,0234234}
(1 row)

SELECT idx('{1234234,-30,-30,0234234,-30}'::text[], '-30');
 idx 
-----
   2
(1 row)

SELECT subarray('{1234234,-30,-30,0234234,-30}'::text[],2,3);
     subarray      
-------------------
 {-30,-30,0234234}
(1 row)

SELECT subarray('{1234234,-30,-30,0234234,-30}'::text[],-1,1);
 subarray 
----------
 {-30}
(1 row)

SELECT subarray('{1234234,-30,-30,0234234,-30}'::text[],0,-1);
         subarray          
---------------------------
 {1234234,-30,-30,0234234}
(1 row)

SELECT #'{1234234,0234234}'::int[];
 ?column? 
----------
        2
(1 row)

SELECT '{123,623,445}'::int[] + 1245;
      ?column?      
--------------------
 {123,623,445,1245}
(1 row)

SELECT '{123,623,445}'::int[] + 445;
     ?column?      
-------------------
 {123,623,445,445}
(1 row)

SELECT '{123,623,445}'::int[] + '{1245,87,445}';
         ?column?          
---------------------------
 {123,623,445,1245,87,445}
(1 row)

SELECT '{123,623,445}'::int[] - 623;
 ?column?  
-----------
 {123,445}
(1 row)

SELECT '{123,623,445}'::int[] - '{1623,623}'::int[];
 ?column?  
-----------
 {123,445}
(1 row)

SELECT '{123,623,445}'::int[] | '{1623,623}'::int[];
      ?column?      
--------------------
 {123,445,623,1623}
(1 row)

SELECT '{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,
		21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,
		39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,
		57,58,59,60,61,62,63,64,65}'::int[] | '{1623,623, 32, 60}'::int[];
                                                                                               ?column?                                                                                               
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,623,1623}
(1 row)

SELECT '{123,623,445}'::int[] & '{1623,623}';
 ?column? 
----------
 {623}
(1 row)

SELECT '{-1,3,1}'::int[] & '{1,2}';
 ?column? 
----------
 {1}
(1 row)

SELECT '{1,3,1}'::int[] & '{1,2}';
 ?column? 
----------
 {1}
(1 row)

SELECT '{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,
		21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,
		39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,
		57,58,59,60,61,62,63,64,65}'::int[] & '{1623,623, 32, 60}'::int[];
 ?column? 
----------
 {32,60}
(1 row)

SELECT #'{1234234,0234234}'::text[];
 ?column? 
----------
        2
(1 row)

SELECT '{123,623,445}'::text[] + '1245'::text;
      ?column?      
--------------------
 {123,623,445,1245}
(1 row)

SELECT '{123,623,445}'::text[] + '445'::text;
     ?column?      
-------------------
 {123,623,445,445}
(1 row)

SELECT '{123,623,445}'::text[] + '{1245,87,445}';
         ?column?          
---------------------------
 {123,623,445,1245,87,445}
(1 row)

SELECT '{123,623,445}'::text[] - '623'::text;
 ?column?  
-----------
 {123,445}
(1 row)

SELECT '{123,623,445}'::text[] - '{1623,623}'::text[];
 ?column?  
-----------
 {123,445}
(1 row)

SELECT '{123,623,445}'::text[] | '{1623,623}'::text[];
      ?column?      
--------------------
 {123,1623,445,623}
(1 row)

SELECT '{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,
		21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,
		39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,
		57,58,59,60,61,62,63,64,65}'::text[] | '{1623,623, 32, 60}'::text[];
                                                                                               ?column?                                                                                               
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 {1,10,11,12,13,14,15,16,1623,17,18,19,2,20,21,22,23,24,25,26,27,28,29,3,30,31,32,33,34,35,36,37,38,39,4,40,41,42,43,44,45,46,47,48,49,5,50,51,52,53,54,55,56,57,58,59,6,60,61,62,623,63,64,65,7,8,9}
(1 row)

SELECT '{123,623,445}'::text[] & '{1623,623}';
 ?column? 
----------
 {623}
(1 row)

SELECT '{-1,3,1}'::text[] & '{1,2}';
 ?column? 
----------
 {1}
(1 row)

SELECT '{1,3,1}'::text[] & '{1,2}';
 ?column? 
----------
 {1}
(1 row)

SELECT '{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,
		21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,
		39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,
		57,58,59,60,61,62,63,64,65}'::text[] & '{1623,623, 32, 60}'::text[];
 ?column? 
----------
 {32,60}
(1 row)

SET anyarray.similarity_type = 'cosine';
SELECT similarity('{3,2}'::text[], '{3,2,1}');
 similarity 
------------
   0.816497
(1 row)

SELECT similarity('{3,2}'::int[], '{3,2,1}');
 similarity 
------------
   0.816497
(1 row)

SELECT similarity('{2,1}'::int[], '{3,2,1}');
 similarity 
------------
   0.816497
(1 row)

SELECT similarity('{}'::int[], '{3,2,1}');
 similarity 
------------
          0
(1 row)

SELECT similarity('{12,10}'::int[], '{3,2,1}');
 similarity 
------------
          0
(1 row)

SELECT similarity('{123}'::int[], '{}');
 similarity 
------------
          0
(1 row)

SELECT similarity('{1,4,6}'::int[], '{1,4,6}');
 similarity 
------------
          1
(1 row)

SELECT similarity('{1,4,6}'::int[], '{6,4,1}');
 similarity 
------------
          1
(1 row)

SELECT similarity('{1,4,6}'::int[], '{5,4,6}'); 
 similarity 
------------
   0.666667
(1 row)

SELECT similarity('{1,4,6}'::int[], '{5,4,6}');
 similarity 
------------
   0.666667
(1 row)

SELECT similarity('{1,2}'::int[], '{2,2,2,2,2,1}');
 similarity 
------------
          1
(1 row)

SELECT similarity('{1,2}'::int[], '{1,2,2,2,2,2}');
 similarity 
------------
          1
(1 row)

SELECT similarity('{}'::int[], '{3}');
 similarity 
------------
          0
(1 row)

SELECT similarity('{3}'::int[], '{3}');
 similarity 
------------
          1
(1 row)

SELECT similarity('{2}'::int[], '{3}');
 similarity 
------------
          0
(1 row)

SET anyarray.similarity_type = 'overlap';
SELECT similarity('{3,2}'::int[], '{3,2,1}');
 similarity 
------------
   0.666667
(1 row)

SET anyarray.similarity_threshold = 0.6;
SELECT '{3,2}'::int[] % '{3,2,1}' AS "true";
 true 
------
 t
(1 row)

SET anyarray.similarity_threshold = 0.7;
SELECT '{3,2}'::int[] % '{3,2,1}' AS "false";
 false 
-------
 f
(1 row)

